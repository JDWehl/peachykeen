{"ast":null,"code":"import _regeneratorRuntime from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/satdey/Documents/peachykeen/peachykeen/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/satdey/Documents/peachykeen/peachykeen/client/src/components/Admin.js\";\nimport React, { Component } from 'react';\nimport LoaderButton from \"./LoaderButton\";\nimport moment from 'moment';\n\nvar Admin =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(Admin, _Component);\n\n  function Admin(props) {\n    var _this;\n\n    _classCallCheck(this, Admin);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(Admin).call(this, props));\n    _this.state = {\n      isLoggedOn: true,\n      userid: '',\n      password: '',\n      isSuccess: false,\n      isLoading: false,\n      selectedRestaurant: \"-1\",\n      data: ''\n    };\n    _this.getDataFromDb =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var response, body;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _this.setState({\n                isLoading: true\n              });\n\n              response = \"\";\n              console.log(_this.state.selectedRestaurant);\n\n              if (!(_this.state.selectedRestaurant === null || _this.state.selectedRestaurant === \"-1\")) {\n                _context.next = 9;\n                break;\n              }\n\n              _context.next = 6;\n              return fetch('/restaurants');\n\n            case 6:\n              response = _context.sent;\n              _context.next = 12;\n              break;\n\n            case 9:\n              _context.next = 11;\n              return fetch('/restaurants/' + _this.state.selectedRestaurant);\n\n            case 11:\n              response = _context.sent;\n\n            case 12:\n              _context.next = 14;\n              return response.json();\n\n            case 14:\n              body = _context.sent;\n              console.log(body);\n\n              _this.setState({\n                data: Array.from(body)\n              });\n\n              _this.setState({\n                isLoading: false\n              });\n\n            case 18:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    _this.handleChange = function (e) {\n      e.preventDefault();\n\n      _this.getDataFromDb();\n    };\n\n    _this.handleLogin = function (e) {\n      e.preventDefault();\n\n      if (_this.state.userid === \"admin\" && _this.state.password === \"password\") {\n        _this.setState({\n          isLoggedOn: true,\n          message: \"Login successful! Redirecting now!\",\n          isSuccess: true,\n          color: 'success'\n        });\n\n        _this.getDataFromDb();\n      } else {\n        _this.setState({\n          message: \"Incorrect user name or password\",\n          isSuccess: false,\n          color: 'danger'\n        });\n      }\n    };\n\n    _this.getDataFromDb();\n\n    return _this;\n  }\n\n  _createClass(Admin, [{\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var Login = React.createElement(\"div\", {\n        id: \"admin-login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"col-3 container align-self-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        onSubmit: this.handleLogin,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, React.createElement(\"h5\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Admin Portal\")), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"span\", {\n        id: \"warningmessage\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      }, \" \", this.state.message, \" \")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 69\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"id\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-user-alt\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 72\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        name: \"id\",\n        type: \"text\",\n        placeholder: \"User ID\",\n        value: this.state.email,\n        autoComplete: \"username\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            userid: e.target.value\n          });\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 76\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 78\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79\n        },\n        __self: this\n      }, React.createElement(\"label\", {\n        for: \"password\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"fas fa-key\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 80\n        },\n        __self: this\n      })), React.createElement(\"input\", {\n        name: \"password\",\n        type: \"password\",\n        placeholder: \"Password\",\n        value: this.state.password,\n        autoComplete: \"current-password\",\n        onChange: function onChange(e) {\n          return _this2.setState({\n            password: e.target.value\n          });\n        },\n        required: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 81\n        },\n        __self: this\n      })), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 84\n        },\n        __self: this\n      })), React.createElement(\"div\", {\n        className: \"row justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        type: \"submit\",\n        className: \"btn btn-primary\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 87\n        },\n        __self: this\n      }, \"Login\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 89\n        },\n        __self: this\n      }))));\n      var LoadButton = React.createElement(LoaderButton, {\n        block: \"true\",\n        bssize: \"large\",\n        type: \"submit\",\n        isLoading: this.state.isLoading,\n        text: \"Login\",\n        loadingText: \"Data Loading\",\n        id: \"DataLoad\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 94\n        },\n        __self: this\n      });\n      var RestDropDown = React.createElement(\"select\", {\n        className: \"form-control\",\n        value: this.state.selectedRestaurant,\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103\n        },\n        __self: this\n      }, React.createElement(\"option\", {\n        value: \"-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 104\n        },\n        __self: this\n      }, \"All Restaurants\"), this.state.data ? this.state.data.map(function (restaurant) {\n        return React.createElement(\"option\", {\n          key: restaurant.id,\n          value: restaurant.id,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, restaurant.Name);\n      }) : \"\");\n      var ReservationTable = React.createElement(\"table\", {\n        className: \"table table-striped table-dark\",\n        id: \"reserveTable\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 111\n        },\n        __self: this\n      }, React.createElement(\"thead\", {\n        className: \"thead-light\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 112\n        },\n        __self: this\n      }, React.createElement(\"tr\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }, React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 114\n        },\n        __self: this\n      }, \"Restaurant Name\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, \"User Name\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 116\n        },\n        __self: this\n      }, \"Email\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, \"Date\"), React.createElement(\"th\", {\n        scope: \"col\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118\n        },\n        __self: this\n      }, \"Time\"))), React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121\n        },\n        __self: this\n      }, this.state.data ? this.state.data.map(function (restaurant, index) {\n        return restaurant.Reserve ? restaurant.Reserve.map(function (review, index2) {\n          return React.createElement(\"tr\", {\n            key: index + index2,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }, React.createElement(\"th\", {\n            scope: \"row\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }, restaurant.Name), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 127\n            },\n            __self: this\n          }, review.user_name), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 128\n            },\n            __self: this\n          }, review.user_id), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 129\n            },\n            __self: this\n          }, moment(review.date).format(\"MM/DD/YY\")), React.createElement(\"td\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }, moment(review.date).format(\"h:mm a\")));\n        }) : null;\n      }) : null));\n      var Page = React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 138\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row col-6\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139\n        },\n        __self: this\n      }, RestDropDown), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      }, React.createElement(\"h4\", {\n        className: \"form-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 143\n        },\n        __self: this\n      }, \"Reservation Table\")), React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145\n        },\n        __self: this\n      }, ReservationTable));\n      var AdminDetails = React.createElement(\"section\", {\n        className: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"admin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"row\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(\"h3\", {\n        className: \"form-title\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, \"Admin Portal\")), this.state.isLoading ? LoadButton : Page));\n      return React.createElement(\"div\", {\n        className: \"App\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160\n        },\n        __self: this\n      }, this.state.isLoggedOn ? AdminDetails : Login);\n    }\n  }]);\n\n  return Admin;\n}(Component);\n\nexport default Admin;","map":{"version":3,"sources":["/Users/satdey/Documents/peachykeen/peachykeen/client/src/components/Admin.js"],"names":["React","Component","LoaderButton","moment","Admin","props","state","isLoggedOn","userid","password","isSuccess","isLoading","selectedRestaurant","data","getDataFromDb","setState","response","console","log","fetch","json","body","Array","from","handleChange","e","preventDefault","handleLogin","message","color","Login","email","target","value","LoadButton","RestDropDown","map","restaurant","id","Name","ReservationTable","index","Reserve","review","index2","user_name","user_id","date","format","Page","AdminDetails"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport LoaderButton from \"./LoaderButton\";\nimport moment from 'moment';\n\nclass Admin extends Component {\n  state = {\n    isLoggedOn: true,\n    userid: '',\n    password: '',\n    isSuccess: false,\n    isLoading: false,\n    selectedRestaurant: \"-1\",\n    data: ''\n  }\n\n  constructor(props){\n    super(props);\n    this.getDataFromDb();\n  }\n\n  getDataFromDb = async () => {\n    this.setState({ isLoading: true });\n    var response = \"\";\n    console.log(this.state.selectedRestaurant);\n    if (this.state.selectedRestaurant === null || this.state.selectedRestaurant === \"-1\"){\n      response = await fetch('/restaurants');\n    }\n    else {\n      response = await fetch('/restaurants/'+this.state.selectedRestaurant);\n    }\n    const body = await response.json();\n    console.log(body);\n    this.setState({data: Array.from(body)});\n    this.setState({ isLoading: false });\n  };\n\n  handleChange = (e) =>{\n    e.preventDefault();\n    this.getDataFromDb();\n  }\n  handleLogin = (e) =>{\n    e.preventDefault();\n    if (this.state.userid === \"admin\" && this.state.password === \"password\"){\n      this.setState({ isLoggedOn:true,\n                      message: \"Login successful! Redirecting now!\",\n                      isSuccess: true,\n                      color: 'success'\n      });\n      this.getDataFromDb();\n    }\n    else{\n      this.setState({\n                      message: \"Incorrect user name or password\",\n                      isSuccess: false,\n                      color: 'danger'\n      });\n    }\n  }\n  render() {\n    var Login = <div id=\"admin-login\">\n    <div className=\"col-3 container align-self-center\">\n    <form onSubmit={this.handleLogin}>\n    <div className=\"row justify-content-center\">\n    <h5>Admin Portal</h5>\n    </div>\n    <div className=\"row justify-content-center\">\n    <span id=\"warningmessage\"> {this.state.message} </span>\n    </div>\n    <br/>\n    <div className=\"row justify-content-center\">\n    <div className=\"form-group\">\n    <label for=\"id\"><i className=\"fas fa-user-alt\"></i></label>\n    <input name = \"id\" type=\"text\" placeholder=\"User ID\" value={this.state.email} autoComplete=\"username\"\n    onChange={e => this.setState({ userid: e.target.value })} required/>\n    </div>\n    <br/>\n    </div>\n    <div className=\"row justify-content-center\">\n    <div className=\"form-group\">\n    <label for=\"password\"><i className=\"fas fa-key\"></i></label>\n    <input name=\"password\" type=\"password\" placeholder=\"Password\" value={this.state.password} autoComplete=\"current-password\"\n    onChange={e => this.setState({ password: e.target.value })} required/>\n    </div>\n    <br/>\n    </div>\n    <div className=\"row justify-content-center\">\n    <button type=\"submit\" className=\"btn btn-primary\">Login</button>\n    </div>\n    <br/>\n    </form>\n    </div>\n    </div>\n\n    var LoadButton = <LoaderButton\n    block = \"true\"\n    bssize=\"large\"\n    type=\"submit\"\n    isLoading={this.state.isLoading}\n    text=\"Login\"\n    loadingText=\"Data Loading\"\n    id = \"DataLoad\"\n    />\n    var RestDropDown = <select className = \"form-control\" value={this.state.selectedRestaurant} onChange={this.handleChange}>\n        <option value=\"-1\">All Restaurants</option>\n    {\n      this.state.data ? this.state.data.map((restaurant) => {\n         return <option key={restaurant.id} value={restaurant.id}>{restaurant.Name}</option>\n      }): \"\"\n    }\n    </select>\n    var ReservationTable = <table className=\"table table-striped table-dark\" id=\"reserveTable\">\n  <thead className=\"thead-light\">\n    <tr>\n      <th scope=\"col\">Restaurant Name</th>\n      <th scope=\"col\">User Name</th>\n      <th scope=\"col\">Email</th>\n      <th scope=\"col\">Date</th>\n      <th scope=\"col\">Time</th>\n    </tr>\n  </thead>\n  <tbody>\n  {\n    this.state.data ? this.state.data.map((restaurant, index) => {\n      return restaurant.Reserve ? restaurant.Reserve.map((review, index2) => {\n         return <tr key={index+index2}>\n                  <th scope=\"row\">{restaurant.Name}</th>\n                  <td>{review.user_name}</td>\n                  <td>{review.user_id}</td>\n                  <td>{moment(review.date).format(\"MM/DD/YY\")}</td>\n                  <td>{moment(review.date).format(\"h:mm a\")}</td>\n                </tr>\n      }): null\n    }):null\n  }\n  </tbody>\n</table>\n\n    var Page = <React.Fragment>\n      <div className=\"row col-6\">\n        {RestDropDown}\n      </div>\n      <div className=\"row\">\n      <h4 className=\"form-title\">Reservation Table</h4>\n      </div>\n      <div className=\"row\">\n        {ReservationTable}\n      </div>\n    </React.Fragment>\n\n    var AdminDetails = <section className=\"profile\">\n    <div className=\"admin\">\n    <div className=\"row\">\n    <h3 className=\"form-title\">Admin Portal</h3>\n    </div>\n    {this.state.isLoading ? LoadButton : Page}\n    </div>\n    </section>\n\n    return (\n      <div className=\"App\">\n      { this.state.isLoggedOn ? AdminDetails : Login }\n      </div>\n\n    );\n  }\n}\n\nexport default Admin;\n"]},"metadata":{},"sourceType":"module"}